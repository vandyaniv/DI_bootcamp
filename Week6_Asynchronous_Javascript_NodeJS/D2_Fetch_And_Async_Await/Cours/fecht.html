<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <!DOCTYPE html>
  <html lang="fr">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cours sur Fetch API</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>

  <body>
    <div class="container my-5">
      <h2>Cours sur Fetch API : Version Simplifiée et Structurée</h2>
      <p><strong>Ce que vous apprendrez</strong></p>
      <ul>
        <li>AJAX</li>
        <li>XMLHttpRequest</li>
        <li>Fetch API</li>
      </ul>

      <p><strong>Ressources utiles</strong></p>
      <ul>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" target="_blank">Documentation #1
            sur
            l'objet XMLHttpRequest</a></li>
        <li><a href="https://www.w3schools.com/xml/xml_http.asp" target="_blank">Documentation #2 sur l'objet
            XMLHttpRequest</a></li>
        <li><a href="https://www.geeksforgeeks.org/difference-between-json-and-xml/" target="_blank">Différence entre
            JSON
            et XML</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous" target="_blank">Comprendre
            le
            JavaScript asynchrone</a></li>
        <li><a href="https://www.youtube.com/watch?v=cuEtnrL9-H0" target="_blank">Vidéo sur la Fetch API</a></li>
      </ul>

      <div class="accordion" id="accordionExample">
        <!-- Section 1 : Qu'est-ce que l'AJAX ? -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              Qu'est-ce que l'AJAX ?
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <p>AJAX signifie "Asynchronous JavaScript And XML".</p>
              <ul>
                <li>C'est l'utilisation de l'objet <code>XMLHttpRequest</code> pour communiquer avec les serveurs.</li>
                <li>Il peut envoyer et recevoir des informations dans différents formats, y compris JSON, XML, HTML et
                  fichiers texte.</li>
                <li>La caractéristique la plus intéressante d'AJAX est sa nature <strong>asynchrone</strong>, ce qui
                  signifie qu'il peut communiquer avec le serveur, échanger des données et mettre à jour la page sans
                  avoir à recharger la page entière.</li>
              </ul>
              <p><strong>Les deux principales fonctionnalités d'AJAX vous permettent de :</strong></p>
              <ul>
                <li>Faire des requêtes au serveur sans recharger la page.</li>
                <li>Recevoir et travailler avec les données du serveur.</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Section 2 : Fetch API est une API Web -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              Fetch API est une API Web
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <p>La méthode <code>fetch()</code> est disponible dans la portée globale. Elle demande au navigateur
                d'envoyer une requête à une URL.</p>
              <ul>
                <li><code>fetch(resource)</code> prend un argument obligatoire : le chemin vers la ressource que vous
                  souhaitez récupérer.</li>
                <li>Elle renvoie une <code>Promise</code> qui se résout en la <code>Response</code> à cette requête.
                </li>
              </ul>
              <p><strong>Exemple : Récupérer des données d'une API</strong></p>
              <pre><code>console.log(fetch("https://api.artic.edu/api/v1/artworks/4"));</code></pre>
              <p>Nous recevons : <br>
                <code>Promise {&lt;pending&gt;} [[PromiseState]] : "fulfilled" [[PromiseResult]] : Response</code>
              </p>
            </div>
          </div>
        </div>

        <!-- Section 3 : Syntaxe de base -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              Syntaxe de base
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <pre><code>fetch(url)
.then(function() {
    // Gère les données de l'API
})
.catch(function() {
    // Gère les erreurs éventuelles
});</code></pre>
              <p><strong>Accès au corps de la réponse :</strong> L'objet <code>Response</code> fournit plusieurs
                méthodes
                basées sur des promesses comme <code>response.text()</code> ou <code>response.json()</code>.</p>
            </div>
          </div>
        </div>

        <!-- Section 4 : Requête GET -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingFour">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
              Requête GET
            </button>
          </h2>
          <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <p><strong>Étapes :</strong></p>
              <ul>
                <li>Appeler la Fetch API et passer l'URL de l'API.</li>
                <li>La méthode <code>fetch()</code> renvoie une <code>Promise</code> qui doit être consommée avec
                  <code>then()</code>.
                </li>
                <li>Si la réponse est réussie, les données sont analysées et affichées.</li>
              </ul>
              <p><strong>Exemple :</strong></p>
              <pre><code>fetch("https://api.artic.edu/api/v1/artworks/14572")
.then((response) => {
    if(response.ok){
        return response.json()
    } else {
        throw new Error("Wrong artwork")
    }
})
.then((obj) => {
    console.log(obj);
    console.log(`The painting is named ${obj.data.title} by the artist ${obj.data.artist_title}`);
})
.catch(function (error) {
    console.log(`We got the error ${error}`);
});</code></pre>
            </div>
          </div>
        </div>

        <!-- Section 5 : Requête POST -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingFive">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
              Requête POST
            </button>
          </h2>
          <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <p><strong>Exemple :</strong></p>
              <pre><code>fetch(resource, {
  method: "POST",
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({ title: 'New Post' })
})
.then(response => response.json())
.then(data => console.log(data))
.catch(error => console.error('Erreur:', error));</code></pre>
            </div>
          </div>
        </div>

        <!-- Section 6 : Conclusion -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingSix">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
              Conclusion
            </button>
          </h2>
          <div id="collapseSix" class="accordion-collapse collapse" aria-labelledby="headingSix"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <p>La Fetch API est une méthode moderne et facile pour récupérer des ressources d'un serveur.
                Contrairement à l'objet
                `XMLHttpRequest`, elle simplifie le travail avec les réponses asynchrones et utilise des promesses pour
                rendre le code
                plus lisible et plus facile à déboguer.

                Pour résumer :
                - Utilisez `fetch()` pour faire des requêtes asynchrones.
                - Traitez la réponse avec les méthodes `then()`, `catch()` et `finally()`.
                - Utilisez `response.json()` pour analyser les données JSON envoyées par le serveur.
                - Vérifiez les erreurs réseau avec `catch()` et utilisez la gestion d'erreurs HTTP dans le bloc `then()`
                en vérifiant la
                propriété `response.ok`.

                Restez attentifs aux futures mises à jour et fonctionnalités supplémentaires qui seront ajoutées à l'API
                Fetch. Elle
                continue d'évoluer pour rendre le travail avec les données serveur plus simple et plus intuitif.

                Vous pouvez continuer à explorer d'autres méthodes de Fetch, comme les requêtes PUT ou DELETE, et
                apprendre à envoyer
                des en-têtes personnalisés et à gérer l'authentification dans vos requêtes.

                Merci d'avoir suivi ce cours sur la Fetch API, et continuez à pratiquer !
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>

  </html>
  <script src="./fecht.js"></script>
</body>

</html>